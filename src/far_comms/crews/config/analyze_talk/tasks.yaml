research_resources_task:
  description: >
    Research and find actual URLs for the speaker's PRIMARY resources - the main work they are presenting.
    This is for social media sharing (1 tweet), so focus on 1-4 most important resources only.
    
    TALK CONTEXT:
    - Speaker: {speaker}
    - Affiliation: {affiliation}
    - Talk Title: {talk_title}
    - Slides Content: {slides_content}
    
    PROGRESSIVE SEARCH STRATEGY (minimize searches):
    
    1. START: Look for QR codes and explicit URLs in slides first (no search needed)
    
    2. SINGLE SEARCH: Try one broad search for speaker's main work:
       * Query: "{speaker} {talk_title} paper arXiv"
       * Look for primary academic paper
       * If 1+ good resource found: STOP HERE
    
    3. EXPAND IF NEEDED: Only if step 2 finds nothing, try:
       * "{speaker} {affiliation} research publications"
       * Look for recent papers, project websites
       * If 1+ good resource found: STOP HERE
    
    4. LAST RESORT: Only if steps 2-3 fail:
       * GitHub repositories or project websites
       * But prioritize papers/academic content over code
    
    EFFICIENCY RULES:
    - MAX 3 searches total
    - Stop immediately when 2-3 quality resources found
    - Academic papers > Project websites > GitHub repos
    - Quality over quantity - better to have 1 perfect resource than 5 mediocre ones
    
    CRITICAL VALIDATION RULES:
    - MANDATORY: Speaker "{speaker}" MUST be listed as author/co-author on ALL papers
    - MANDATORY: For code repositories, "{speaker}" MUST be the owner or primary contributor  
    - MANDATORY: Verify URLs actually work before including them
    - MANDATORY: If you cannot confirm speaker authorship, DO NOT include the resource
    - PRIORITY: Speaker's own work ONLY - no related work by other authors
    - Do NOT include resources just because they match the topic - they must be speaker's work
    
    STRICT EXCLUSIONS:
    - Do NOT include general speaker homepages or CV
    - Do NOT include institutional/company websites  
    - Do NOT include cited papers by other authors
    - Do NOT include comprehensive reference lists
    
    Expected result: 1-4 resources max, focus on speaker's main contributions
    
  expected_output: >
    Simple format for Coda Resources column:
    "Paper Title - https://arxiv.org/abs/123\nProject Website - https://speaker.org/project"
    
    Maximum 3 lines. Focus on main academic/research resources only.
    Skip GitHub unless no papers/websites found.
    Stop searching once you find 1-2 quality resources.
  agent: resource_researcher_agent

analyze_transcript_task:
  description: >
    Analyze the cleaned transcript to extract core findings, technical details, key insights, and organizational structure.
    
    TRANSCRIPT CONTENT (from Coda):
    {transcript_content}
    
    SPEAKER INFO:
    - Speaker: {speaker}
    - Affiliation: {affiliation}
    
    Your analysis should:
    - Identify the main thesis and supporting arguments
    - Extract the speaker's organizational pattern and talk structure
    - Capture the speaker's section titles, main points, and flow
    - Extract specific technical details, numbers, and metrics
    - Find surprising or counterintuitive claims
    - Collect impactful direct quotes from the speaker
    - Highlight key findings for both technical and non-technical audiences
    
  expected_output: >
    {
      "speaker": "{speaker} ({affiliation})",
      "core_thesis": "Main argument in 1 sentence",
      "key_findings": ["Finding 1", "Finding 2", "Finding 3"],
      "talk_outline": {
        "structure_type": "Describe the speaker's organizational pattern",
        "main_points": [
          {"point": "First main point/section title", "details": "Key content and supporting details"},
          {"point": "Second main point/section title", "details": "Key content and supporting details"}
        ]
      },
      "technical_details": {"metrics": ["...", "..."], "methods": ["...", "..."], "numbers": ["..."] OR "Not applicable - policy/strategic talk"},
      "surprising_claims": ["Counterintuitive insight 1", "Counterintuitive insight 2"],
      "impactful_quotes": ["Direct quote 1", "Direct quote 2"]
    }
  agent: transcript_analyzer_agent

final_assembly_task:
  description: >
    Assemble resource research results and prepare final outputs for Coda database update.
    
    Extract the ACTUAL content from the resource research task:
    - Resources: Use "resources_formatted" string from resource research task
    - Generate processing summary for "Webhook progress" column  
    - Set "Webhook status" to "Done"
    
    IMPORTANT: Only process resource research results - transcript analysis is currently disabled.
    
  expected_output: >
    {
      "coda_updates": {
        "Resources": "Formatted resource list ready for Coda (from resources_formatted)",
        "Webhook progress": "Resource research completed successfully: X resources found",
        "Webhook status": "Done"
      },
      "processing_summary": {
        "resources_found": "Number of resources found",
        "search_methods_used": "QR codes, paper search, etc",
        "total_processing_time": "Processing time"
      }
    }
  agent: resource_researcher_agent
  context:
    - research_resources_task